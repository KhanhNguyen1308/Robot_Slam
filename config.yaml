# Configuration for Jetson Nano Robot Control System

# Motor Controller (Jetson GPIO with A4988 drivers)
motor_controller:
  # Left motor pins (BOARD numbering)
  left_step_pin: 33    # Pin 33 (GPIO 13)
  left_dir_pin: 35     # Pin 35 (GPIO 19)
  left_enable_pin: 37  # Pin 37 (GPIO 26)
  left_ms1_pin: 29     # Pin 29 (GPIO 5) - Optional
  left_ms2_pin: 31     # Pin 31 (GPIO 6) - Optional
  left_ms3_pin: 11     # Pin 11 (GPIO 17) - Optional
  
  # Right motor pins (BOARD numbering)
  right_step_pin: 32   # Pin 32 (GPIO 12)
  right_dir_pin: 36    # Pin 36 (GPIO 16)
  right_enable_pin: 38 # Pin 38 (GPIO 20)
  right_ms1_pin: 13    # Pin 13 (GPIO 27) - Optional
  right_ms2_pin: 15    # Pin 15 (GPIO 22) - Optional
  right_ms3_pin: 16    # Pin 16 (GPIO 23) - Optional
  
  # Stepper motor configuration
  steps_per_rev: 200   # Full steps per revolution (1.8Â° steppers)
  microsteps: 16       # Microstepping setting (1, 2, 4, 8, 16)

# Robot Kinematics
robot:
  wheel_diameter: 0.066  # meters (66mm)
  wheel_base: 0.165      # meters (165mm between wheels)
  max_linear_speed: 0.5  # m/s
  max_angular_speed: 2.0 # rad/s
  
  # Safety limits
  watchdog_timeout: 0.5  # seconds
  emergency_stop_enabled: true

# Camera Settings
camera:
  stereo:
    left_device: 0
    right_device: 1
    width: 640
    height: 480
    fps: 30
  
  # Camera calibration (update with your calibration)
  calibration_file: "./config/stereo_calibration.yaml"

# ORB-SLAM3 Settings
orbslam:
  path: "/home/jetson/ORB_SLAM3"
  vocabulary: "/home/jetson/ORB_SLAM3/Vocabulary/ORBvoc.txt"
  settings: "./config/orbslam_stereo.yaml"
  mode: "stereo"  # stereo, monocular, rgbd

# Web Server
webserver:
  host: "0.0.0.0"
  port: 5000
  debug: false
  stream_enabled: true
  stream_fps: 15

# Control Parameters
control:
  update_rate: 50  # Hz
  command_timeout: 0.5  # seconds
  
  # PID for velocity control (if needed)
  pid:
    kp: 1.0
    ki: 0.0
    kd: 0.1

# Logging
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  save_trajectory: true
  trajectory_file: "./logs/trajectory.csv"
  save_images: false
  image_dir: "./logs/images"
